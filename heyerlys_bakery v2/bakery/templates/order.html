{% extends 'base.html' %}

{% block content %}
<h2>Place an Order</h2>

<form method="POST" action="{% url 'order_submit' %}">
    {% csrf_token %}

    <label for="customer_name">Name:</label>
    <input type="text" name="customer_name" id="customer_name" required><br>

    <label for="customer_email">Email:</label>
    <input type="email" name="customer_email" id="customer_email" required><br><br>

    <h3>Select Items:</h3>
    <div class="menu-grid">
        {% for item in items %}
        <div class="menu-item">
            <h4>{{ item.item_name }}</h4>
            <p class="price">${{ item.item_cost }}</p>

            <div class="quantity-selector">
                <button type="button" class="decrease" data-id="{{ item.id }}">âˆ’</button>
                <input type="number" name="quantity_{{ item.id }}" id="quantity_{{ item.id }}" value="0" min="0" readonly>
                <button type="button" class="increase" data-id="{{ item.id }}">+</button>
            </div>
        </div>
        {% endfor %}
    </div>

    <br>
    <button type="submit" class="submit-btn">Submit Order</button>
</form>

<script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.increase').forEach(button => {
        button.addEventListener('click', function() {
            const id = this.getAttribute('data-id');
            const input = document.getElementById(`quantity_${id}`);
            input.value = parseInt(input.value) + 1;
        });
    });

    document.querySelectorAll('.decrease').forEach(button => {
        button.addEventListener('click', function() {
            const id = this.getAttribute('data-id');
            const input = document.getElementById(`quantity_${id}`);
            if (parseInt(input.value) > 0) {
                input.value = parseInt(input.value) - 1;
            }
        });
    });
});
</script>
{% endblock %}
